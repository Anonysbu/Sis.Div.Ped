(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{67:function(){},2061:function(){},9344:function(e,t,a){Promise.resolve().then(a.bind(a,150))},150:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ei}});var s=a(7437),r=a(2265),i=a(2093);let n=(0,a(3777).eI)("https://abblqeenawmrumiuqptc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFiYmxxZWVuYXdtcnVtaXVxcHRjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzc1OTY1MjAsImV4cCI6MjA1MzE3MjUyMH0.TAFV-igagccEwGYmdJkGFiBqQ5SzZ6CEVXdNO8uhOXE"),l=[{id:"cozinha",nome:"COZINHA COMUNIT\xc1RIA"},{id:"casa",nome:"CASA DE APOIO"},{id:"abrigo",nome:"ABRIGO"},{id:"cras",nome:"CRAS"},{id:"creas",nome:"CREAS"},{id:"scfv",nome:"SCFV"},{id:"igd",nome:"IGD"},{id:"crianca",nome:"CRIAN\xc7A FELIZ"}];var o=a(7053),d=a(535),c=a(1994),m=a(3335);function u(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,m.m6)((0,c.W)(t))}let f=(0,d.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),x=r.forwardRef((e,t)=>{let{className:a,variant:r,size:i,asChild:n=!1,...l}=e,d=n?o.g7:"button";return(0,s.jsx)(d,{className:u(f({variant:r,size:i,className:a})),ref:t,...l})});x.displayName="Button";let h=r.forwardRef((e,t)=>{let{className:a,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:u("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...i})});h.displayName="Input";var p=a(6394);let g=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),v=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(p.f,{ref:t,className:u(g(),a),...r})});v.displayName=p.f.displayName;let b=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:u("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});b.displayName="Card";let j=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:u("flex flex-col space-y-1.5 p-6",a),...r})});j.displayName="CardHeader";let N=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:u("text-2xl font-semibold leading-none tracking-tight",a),...r})});N.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:u("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let y=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:u("p-6 pt-0",a),...r})});y.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:u("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter";var w=a(1727),C=a(875),k=a(2135),I=a(401);let R=w.fC;w.ZA;let E=w.B4,S=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(w.xz,{ref:t,className:u("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",a),...i,children:[r,(0,s.jsx)(w.JO,{asChild:!0,children:(0,s.jsx)(C.Z,{className:"h-4 w-4 opacity-50"})})]})});S.displayName=w.xz.displayName;let U=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(w.u_,{ref:t,className:u("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(k.Z,{className:"h-4 w-4"})})});U.displayName=w.u_.displayName;let _=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(w.$G,{ref:t,className:u("flex cursor-default items-center justify-center py-1",a),...r,children:(0,s.jsx)(C.Z,{className:"h-4 w-4"})})});_.displayName=w.$G.displayName;let z=r.forwardRef((e,t)=>{let{className:a,children:r,position:i="popper",...n}=e;return(0,s.jsx)(w.h_,{children:(0,s.jsxs)(w.VY,{ref:t,className:u("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,s.jsx)(U,{}),(0,s.jsx)(w.l_,{className:u("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:r}),(0,s.jsx)(_,{})]})})});z.displayName=w.VY.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(w.__,{ref:t,className:u("py-1.5 pl-8 pr-2 text-sm font-semibold",a),...r})}).displayName=w.__.displayName;let T=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(w.ck,{ref:t,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a),...i,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(w.wU,{children:(0,s.jsx)(I.Z,{className:"h-4 w-4"})})}),(0,s.jsx)(w.eT,{children:r})]})});T.displayName=w.ck.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(w.Z0,{ref:t,className:u("-mx-1 my-1 h-px bg-muted",a),...r})}).displayName=w.Z0.displayName;var O=a(9270);let V=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(O.fC,{ref:t,className:u("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...r,children:(0,s.jsx)(O.z$,{className:u("flex items-center justify-center text-current"),children:(0,s.jsx)(I.Z,{className:"h-4 w-4"})})})});V.displayName=O.fC.displayName;var F=a(8930),Z=a(2735),q=a(9584),A=a(3134);let D=A.fC,Y=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(A.ck,{ref:t,className:u("border-b",a),...r})});Y.displayName="AccordionItem";let J=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsx)(A.h4,{className:"flex",children:(0,s.jsxs)(A.xz,{ref:t,className:u("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...i,children:[r,(0,s.jsx)(C.Z,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});J.displayName=A.xz.displayName;let P=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsx)(A.VY,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...i,children:(0,s.jsx)("div",{className:u("pb-4 pt-0",a),children:r})})});P.displayName=A.VY.displayName;var M=a(9027),L=a(2489);let B=M.fC,G=M.xz,Q=M.h_;M.x8;let X=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(M.aV,{ref:t,className:u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});X.displayName=M.aV.displayName;let $=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(Q,{children:[(0,s.jsx)(X,{}),(0,s.jsxs)(M.VY,{ref:t,className:u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[r,(0,s.jsxs)(M.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(L.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});$.displayName=M.VY.displayName;let H=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:u("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};H.displayName="DialogHeader";let W=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(M.Dx,{ref:t,className:u("text-lg font-semibold leading-none tracking-tight",a),...r})});W.displayName=M.Dx.displayName;let K=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(M.dk,{ref:t,className:u("text-sm text-muted-foreground",a),...r})});K.displayName=M.dk.displayName;var ee=a(3643);let et=r.forwardRef((e,t)=>{let{className:a,children:r,...i}=e;return(0,s.jsxs)(ee.fC,{ref:t,className:u("relative overflow-hidden",a),...i,children:[(0,s.jsx)(ee.l_,{className:"h-full w-full rounded-[inherit]",children:r}),(0,s.jsx)(ea,{}),(0,s.jsx)(ee.Ns,{})]})});et.displayName=ee.fC.displayName;let ea=r.forwardRef((e,t)=>{let{className:a,orientation:r="vertical",...i}=e;return(0,s.jsx)(ee.gb,{ref:t,orientation:r,className:u("flex touch-none select-none transition-colors","vertical"===r&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===r&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...i,children:(0,s.jsx)(ee.q4,{className:"relative flex-1 rounded-full bg-border"})})});ea.displayName=ee.gb.displayName;var es=a(721);let er=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(es.fC,{className:u("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...r,ref:t,children:(0,s.jsx)(es.bU,{className:u("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});function ei(){let{contratos:e,contratoSelecionado:t,itensPedido:a,recursosSelecionados:o,divisaoResultado:d,adicionarContrato:c,excluirContrato:m,selecionarContrato:u,atualizarQuantidadeItem:f,toggleRecursoSelecionado:p,calcularDivisao:g,transferirItem:w,exportarParaPlanilha:C,RECURSOS_PREDEFINIDOS:k}=function(){let[e,t]=(0,r.useState)([]),[a,s]=(0,r.useState)(null),[o,d]=(0,r.useState)([]),[c,m]=(0,r.useState)([]),[u,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{x()},[]);let x=async()=>{try{let{data:e,error:a}=await n.from("contratos").select("*");if(a)throw a;let s=await Promise.all(e.map(async e=>{let{data:t,error:a}=await n.from("itens").select("*").eq("contrato_id",e.id);if(a)throw a;return{...e,itens:t.map(e=>({...e,recursosElegiveis:e.recursos_elegiveis.split(",")}))}}));t(s)}catch(e){console.error("Erro ao carregar contratos:",e)}},h=async e=>{try{let{error:t}=await n.from("itens").delete().eq("contrato_id",e);if(t)throw t;let{error:r}=await n.from("contratos").delete().eq("id",e);if(r)throw r;await x(),(null==a?void 0:a.id)===e&&(s(null),d([]))}catch(e){console.error("Erro ao excluir contrato:",e)}};return{contratos:e,contratoSelecionado:a,itensPedido:o,recursosSelecionados:c,divisaoResultado:u,adicionarContrato:async e=>{try{let{data:t,error:a}=await n.from("contratos").insert({nome:e.nome}).select();if(a)throw a;let s=t[0].id;for(let t of e.itens){let{error:e}=await n.from("itens").insert({contrato_id:s,nome:t.nome,unidade:t.unidade,valor_unitario:t.valorUnitario,recursos_elegiveis:t.recursosElegiveis.join(",")});if(e)throw e}await x()}catch(e){console.error("Erro ao adicionar contrato:",e)}},excluirContrato:h,selecionarContrato:t=>{let a=e.find(e=>e.id===t);s(a||null),d(a?a.itens.map(e=>({itemId:e.id,quantidade:0})):[])},atualizarQuantidadeItem:(e,t)=>{d(o.map(a=>a.itemId===e?{...a,quantidade:t}:a))},toggleRecursoSelecionado:e=>{m(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},calcularDivisao:()=>{let e={};c.forEach(t=>{e[t]={itens:{},valorTotal:0}}),o.forEach(t=>{let s=a.itens.find(e=>e.id===t.itemId),r=c.filter(e=>s.recursosElegiveis.includes(e)),i=Math.floor(t.quantidade/r.length),n=t.quantidade%r.length;r.forEach(a=>{let r=i+(n>0?1:0),l=r*s.valorUnitario;e[a].itens[t.itemId]={quantidade:r,valorTotal:l},e[a].valorTotal+=l,n--})}),f(e)},transferirItem:(e,t,s,r)=>{if(!u||!a)return;let i=JSON.parse(JSON.stringify(u)),n=a.itens.find(t=>t.id===e);n.recursosElegiveis.includes(r)&&i[s].itens[e]&&i[s].itens[e].quantidade>=t&&(i[s].itens[e].quantidade-=t,i[s].itens[e].valorTotal-=t*n.valorUnitario,i[s].valorTotal-=t*n.valorUnitario,0===i[s].itens[e].quantidade&&delete i[s].itens[e],i[r].itens[e]||(i[r].itens[e]={quantidade:0,valorTotal:0}),i[r].itens[e].quantidade+=t,i[r].itens[e].valorTotal+=t*n.valorUnitario,i[r].valorTotal+=t*n.valorUnitario,f(i))},exportarParaPlanilha:()=>{if(!u||!a)return;let e=i.P6.book_new();Object.entries(u).forEach(t=>{var s;let[r,n]=t,o=null===(s=l.find(e=>e.id===r))||void 0===s?void 0:s.nome,d=Object.entries(n.itens).map(e=>{let[t,s]=e,r=a.itens.find(e=>e.id===t);return{Item:null==r?void 0:r.nome,Quantidade:s.quantidade,Unidade:null==r?void 0:r.unidade,"Valor Unit\xe1rio":null==r?void 0:r.valorUnitario.toFixed(2),"Valor Total":s.valorTotal.toFixed(2)}});d.push({Item:"TOTAL",Quantidade:"",Unidade:"","Valor Unit\xe1rio":"","Valor Total":n.valorTotal.toFixed(2)});let c=i.P6.json_to_sheet(d);i.P6.book_append_sheet(e,c,o||r)});let t=new Date().toLocaleString("pt-BR",{month:"long",year:"numeric"}).toUpperCase(),s="PEDIDOS ".concat(a.nome.toUpperCase()," - ").concat(t," - CONFERIR.xlsx"),r=new Blob([i.cW(e,{bookType:"xlsx",type:"array"})],{type:"application/octet-stream"}),n=window.URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download=s,o.click(),window.URL.revokeObjectURL(n)},RECURSOS_PREDEFINIDOS:l}}(),[I,U]=(0,r.useState)({nome:"",itens:[]}),[_,O]=(0,r.useState)({nome:"",unidade:"",valorUnitario:0,recursosElegiveis:[]}),[A,M]=(0,r.useState)({}),[L,Q]=(0,r.useState)({}),[X,ee]=(0,r.useState)(!1),ea=async()=>{await c({id:Date.now().toString(),nome:I.nome,itens:I.itens}),U({nome:"",itens:[]})},es=(e,t)=>{let a=A["".concat(e,"-").concat(t)]||0,s=L["".concat(e,"-").concat(t)];s&&a>0&&(w(e,a,t,s),M(a=>({...a,["".concat(e,"-").concat(t)]:0})),Q(a=>({...a,["".concat(e,"-").concat(t)]:""})))},ei=e=>{O(t=>({...t,recursosElegiveis:t.recursosElegiveis.includes(e)?t.recursosElegiveis.filter(t=>t!==e):[...t.recursosElegiveis,e]}))};return(0,s.jsxs)("div",{className:"container mx-auto p-4 bg-gray-50 min-h-screen",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center text-blue-600",children:"Sistema de Divis\xe3o de Pedidos"}),(0,s.jsx)(D,{type:"single",collapsible:!0,className:"mb-6",children:(0,s.jsxs)(Y,{value:"novo-contrato",children:[(0,s.jsx)(J,{className:"text-lg font-semibold",children:"Adicionar Novo Contrato"}),(0,s.jsx)(P,{children:(0,s.jsx)(b,{className:"bg-white shadow-md",children:(0,s.jsxs)(y,{className:"space-y-4 p-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(v,{htmlFor:"nomeContrato",className:"text-sm font-medium text-gray-700",children:"Nome do Contrato"}),(0,s.jsx)(h,{id:"nomeContrato",value:I.nome,onChange:e=>U(t=>({...t,nome:e.target.value})),className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v,{htmlFor:"nomeItem",className:"text-sm font-medium text-gray-700",children:"Nome do Item"}),(0,s.jsx)(h,{id:"nomeItem",value:_.nome,onChange:e=>O(t=>({...t,nome:e.target.value})),className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v,{htmlFor:"unidadeItem",className:"text-sm font-medium text-gray-700",children:"Unidade"}),(0,s.jsx)(h,{id:"unidadeItem",value:_.unidade,onChange:e=>O(t=>({...t,unidade:e.target.value})),className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v,{htmlFor:"valorUnitarioItem",className:"text-sm font-medium text-gray-700",children:"Valor Unit\xe1rio"}),(0,s.jsx)(h,{id:"valorUnitarioItem",type:"number",value:_.valorUnitario,onChange:e=>O(t=>({...t,valorUnitario:Number(e.target.value)})),className:"mt-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(v,{className:"text-sm font-medium text-gray-700",children:"Recursos Eleg\xedveis"}),(0,s.jsx)("div",{className:"space-y-2 mt-1",children:k.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(V,{id:"recurso-".concat(e.id),checked:_.recursosElegiveis.includes(e.id),onCheckedChange:()=>ei(e.id)}),(0,s.jsx)(v,{htmlFor:"recurso-".concat(e.id),className:"text-sm text-gray-600",children:e.nome})]},e.id))})]}),(0,s.jsx)(x,{onClick:()=>{U(e=>({...e,itens:[...e.itens,{..._,id:Date.now().toString()}]})),O({nome:"",unidade:"",valorUnitario:0,recursosElegiveis:[]})},className:"mt-2",children:"Adicionar Item ao Contrato"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold mb-2 text-sm text-gray-700",children:"Itens do Contrato"}),I.itens.map((e,t)=>(0,s.jsxs)("div",{className:"mb-2 text-sm text-gray-600",children:[e.nome," - ",e.unidade," - R$ ",e.valorUnitario.toFixed(2)]},t))]}),(0,s.jsx)(x,{onClick:ea,className:"w-full",children:"Salvar Contrato"})]})})})]})}),(0,s.jsxs)(b,{className:"mb-6 bg-white shadow-md",children:[(0,s.jsx)(j,{children:(0,s.jsx)(N,{className:"text-lg font-semibold text-blue-600",children:"Selecionar Contrato e Itens"})}),(0,s.jsx)(y,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(R,{onValueChange:e=>u(e),children:[(0,s.jsx)(S,{className:"w-full",children:(0,s.jsx)(E,{placeholder:"Selecione um contrato"})}),(0,s.jsx)(z,{children:e.map(e=>(0,s.jsx)(T,{value:e.id,children:e.nome},e.id))})]}),t&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,s.jsx)("h3",{className:"font-bold text-sm text-gray-700",children:"Itens do Contrato"}),(0,s.jsxs)(x,{onClick:async()=>{t&&await m(t.id)},variant:"destructive",size:"sm",className:"flex items-center",children:[(0,s.jsx)(F.Z,{className:"mr-2 h-4 w-4"}),"Excluir Contrato"]})]}),a.map(e=>{let a=t.itens.find(t=>t.id===e.itemId);return(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:null==a?void 0:a.nome}),(0,s.jsx)(h,{type:"number",placeholder:"Quantidade",value:e.quantidade,onChange:t=>f(e.itemId,Number(t.target.value)),className:"w-24"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:null==a?void 0:a.unidade})]},e.itemId)})]})]})})]}),(0,s.jsxs)(b,{className:"mb-6 bg-white shadow-md",children:[(0,s.jsx)(j,{children:(0,s.jsx)(N,{className:"text-lg font-semibold text-blue-600",children:"Selecionar Recursos"})}),(0,s.jsx)(y,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(er,{id:"todos-recursos",checked:X,onCheckedChange:()=>{ee(!X),X?o.forEach(e=>{p(e)}):k.forEach(e=>{o.includes(e.id)||p(e.id)})}}),(0,s.jsx)(v,{htmlFor:"todos-recursos",className:"text-sm font-medium text-gray-700",children:"Selecionar Todos"})]}),k.map(e=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(V,{id:e.id,checked:o.includes(e.id),onCheckedChange:()=>p(e.id)}),(0,s.jsx)(v,{htmlFor:e.id,className:"text-sm text-gray-600",children:e.nome})]},e.id))]})})]}),(0,s.jsxs)("div",{className:"flex space-x-2 mb-6",children:[(0,s.jsx)(x,{onClick:g,className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Calcular Divis\xe3o"}),d&&(0,s.jsxs)(x,{onClick:C,className:"flex items-center bg-green-600 hover:bg-green-700 text-white",children:[(0,s.jsx)(Z.Z,{className:"mr-2 h-4 w-4"}),"Exportar para Excel"]})]}),d&&(0,s.jsxs)(b,{className:"bg-white shadow-md",children:[(0,s.jsx)(j,{children:(0,s.jsx)(N,{className:"text-lg font-semibold text-blue-600",children:"Resultado da Divis\xe3o"})}),(0,s.jsx)(y,{children:(0,s.jsx)(et,{className:"h-[400px]",children:o.map(e=>{var a;let r=d[e];return(0,s.jsx)(D,{type:"single",collapsible:!0,className:"mb-4",children:(0,s.jsxs)(Y,{value:e,children:[(0,s.jsxs)(J,{className:"text-sm font-medium text-gray-700",children:[null===(a=k.find(t=>t.id===e))||void 0===a?void 0:a.nome," - R$ ",r.valorTotal.toFixed(2)]}),(0,s.jsx)(P,{children:(0,s.jsx)("ul",{children:Object.entries(r.itens).map(a=>{var r;let[i,n]=a,l=null==t?void 0:t.itens.find(e=>e.id===i);return(0,s.jsx)("li",{className:"mb-2 p-2 border rounded",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-600",children:[null==l?void 0:l.nome,": ",n.quantidade," ",null==l?void 0:l.unidade," - R$"," ",n.valorTotal.toFixed(2)]}),(0,s.jsxs)(B,{children:[(0,s.jsx)(G,{asChild:!0,children:(0,s.jsxs)(x,{variant:"outline",size:"sm",className:"text-blue-600 border-blue-600",children:[(0,s.jsx)(q.Z,{className:"mr-2 h-4 w-4"}),"Transferir"]})}),(0,s.jsxs)($,{children:[(0,s.jsxs)(H,{children:[(0,s.jsx)(W,{className:"text-lg font-semibold text-blue-600",children:"Transferir Item"}),(0,s.jsxs)(K,{children:["Transferir ",null==l?void 0:l.nome," de"," ",null===(r=k.find(t=>t.id===e))||void 0===r?void 0:r.nome]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(h,{type:"number",placeholder:"Quantidade",value:A["".concat(i,"-").concat(e)]||"",onChange:t=>M(a=>({...a,["".concat(i,"-").concat(e)]:Number(t.target.value)})),className:"w-24"}),(0,s.jsxs)(R,{value:L["".concat(i,"-").concat(e)]||"",onValueChange:t=>Q(a=>({...a,["".concat(i,"-").concat(e)]:t})),children:[(0,s.jsx)(S,{className:"w-[180px]",children:(0,s.jsx)(E,{placeholder:"Selecione o destino"})}),(0,s.jsx)(z,{children:o.filter(t=>t!==e&&(null==l?void 0:l.recursosElegiveis.includes(t))).map(e=>{var t;return(0,s.jsx)(T,{value:e,children:null===(t=k.find(t=>t.id===e))||void 0===t?void 0:t.nome},e)})})]}),(0,s.jsx)(x,{onClick:()=>es(i,e),className:"bg-blue-600 hover:bg-blue-700 text-white",children:"Transferir"})]})]})]})]})},i)})})})]})},e)})})})]})]})}er.displayName=es.fC.displayName}},function(e){e.O(0,[425,628,971,117,744],function(){return e(e.s=9344)}),_N_E=e.O()}]);